#!/bin/bash
# Wrapper script for lid event handling
# Save as ~/.local/bin/lid-service-wrapper

LOG_FILE="$HOME/.local/share/lid-service.log"
HANDLER="$HOME/.local/bin/handle-lid-event"

echo "$(date): Lid service wrapper started" >> "$LOG_FILE"

acpi_listen | while read line; do
    echo "$(date): ACPI event: $line" >> "$LOG_FILE"

    if echo "$line" | grep -q "button/lid"; then
        echo "$(date): Lid event detected, calling handler" >> "$LOG_FILE"
        "$HANDLER"
        echo "$(date): Handler completed" >> "$LOG_FILE"
    fi
done
